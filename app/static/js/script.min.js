var DL=DL||{},tabName,thisTab;DL.buttonClick=function(){thisTab=$(this).attr("id").slice(0,-4);for(var a=0;a<DL.tabs.length;a++)thisTab===DL.tabs[a]?(DL[thisTab+"Btn"].attr("class","btn btn-success"),DL[thisTab].show()):(DL[DL.tabs[a]+"Btn"].attr("class","btn btn-primary"),DL[DL.tabs[a]].hide());"scrapbook"===thisTab&&"undefined"==typeof DL.iframe.attr("src")&&(DL.iframe.attr("src","//storify.com/vprnet/dorothy-s-list-scrapbook/embed?border=false"),$("#iframe_script").attr("src","//storify.com/vprnet/dorothy-s-list-scrapbook.js?border=false"))},DL.iframe=$("iframe#storify"),DL.tabs=["books","about","scrapbook"];for(var i=0;i<DL.tabs.length;i++)tabName=DL.tabs[i],DL[tabName]=$("#"+tabName),DL[tabName+"Btn"]=$("#"+tabName+"-btn"),DL[tabName+"Btn"].on("click",DL.buttonClick);if(document.createElement("audio").canPlayType&&!document.createElement("audio").canPlayType("audio/mpeg")){var all_audio=$("audio");all_audio.attr("style","display: none;")}var transition=function(a){return"-webkit-transition: width "+a+"s linear !important;-moz-transition: width "+a+"s linear !important;-o-transition: width "+a+"s linear !important;transition: width "+a+"s linear !important;"};$("a.audio_play").click(function(){var a=$(this),b=this.firstChild,c=$(this).next("div.progress_bar"),d=$(this).parent("div.audio_player").width(),e=c.attr("data"),f=c.attr("remaining"),g=$(this).children("div.play_btn").children("span.glyphicon");a.hasClass("can_play")||(g.attr("class","icon ion-loading-c"),a.addClass("can_play")),b.addEventListener("ended",canPlay(b,c,d,e,f,g,a))});var canPlay=function(a,b,c,d,e,f){if(a.addEventListener("ended",function(){a.currentTime=0,b.attr("style","width: 0px;"),b.attr("remaining",d),b.toggleClass("play"),f.attr("class","glyphicon glyphicon-play")}),b.toggleClass("play"),a.paused===!1){a.pause();var g=b.width();e=d-parseInt(d*g/c,10),b.attr("remaining",e),b.attr("style","width: "+g+"px;"),f.attr("class","glyphicon glyphicon-play")}else a.play(),b.attr("style",transition(e)),f.attr("class","glyphicon glyphicon-pause")};
